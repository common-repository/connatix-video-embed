{"version":3,"file":"index.js","mappings":"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","sources":["webpack://connatix-video-embed/./blocks/video-embed/edit-embed-modal.js","webpack://connatix-video-embed/./blocks/video-embed/edit-embed.js","webpack://connatix-video-embed/./blocks/video-embed/preview-embed.js","webpack://connatix-video-embed/./node_modules/dangerously-set-html-content/dist/index.es.js","webpack://connatix-video-embed/external window \"React\"","webpack://connatix-video-embed/external window [\"wp\",\"blockEditor\"]","webpack://connatix-video-embed/external window [\"wp\",\"blocks\"]","webpack://connatix-video-embed/external window [\"wp\",\"components\"]","webpack://connatix-video-embed/external window [\"wp\",\"element\"]","webpack://connatix-video-embed/external window [\"wp\",\"i18n\"]","webpack://connatix-video-embed/webpack/bootstrap","webpack://connatix-video-embed/webpack/runtime/compat get default export","webpack://connatix-video-embed/webpack/runtime/define property getters","webpack://connatix-video-embed/webpack/runtime/hasOwnProperty shorthand","webpack://connatix-video-embed/webpack/runtime/make namespace object","webpack://connatix-video-embed/./src/index.js"],"sourcesContent":["import { Button, Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n \nexport const EmbedEditModal = props => {\n\n    const { embed_script = \"\", close_modal = () => {}, update_embed = () => {} } = props;\n\n    var frameUrl = jQuery(\"#cnx_frame_wrap iframe\").attr(\"src\");\n\n    return (\n        <>\n            <Modal \n                title=\"Select Video\" \n                onRequestClose={ close_modal } \n                shouldCloseOnEsc={false}\n                shouldCloseOnClickOutside={false}\n                >\n\n\n                <div id=\"cnx_frame_wrap\">\n                    <iframe src={ frameUrl } id=\"cnx_frame\"></iframe>\n                </div>\n                \n                <p></p>\n                <Button isSecondary variant=\"secondary\" onClick={ close_modal }>\n                    Cancel\n                </Button>\n\n            </Modal>\n        </>\n    );\n};","\nimport { __ } from '@wordpress/i18n';\nconst { Component } = wp.element;\nimport { TextControl, Button, Placeholder } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\nimport { EmbedEditModal } from \"./edit-embed-modal\";\n\n/**\n * PostSelector Component\n */\nexport class EditEmbed extends Component {\n\n\tconstructor(props) {\n\n\t\tsuper(...arguments);\n\t\tthis.props = props;\n\n\t\tthis.state = {\n\t\t\tisModalOpen: false\n\t\t};\n\n        this.open_modal = this.open_modal.bind(this);\n        this.close_modal = this.close_modal.bind(this);\n\n\t}\n\n    open_modal(edit_mode) {\n\n        if( typeof(edit_mode) !== 'undefined' && edit_mode === true ) {\n\n            var frameUrl = jQuery(\"#cnx_frame_wrap iframe\").attr(\"src\");\n            var url = new URL(frameUrl);\n            url.searchParams.set(\"embed\", encodeURIComponent( this.props.embed_script ) );\n            jQuery(\"#cnx_frame\").attr(\"src\", url.toString() );\n\n        }\n\n        this.setState({ isModalOpen: true })\n\n        // bind the insert script event\n        var self = this;\n        window.handle_script_select = function(e){\n\n            self.props.update_embed( e.detail.script.script );\n            self.close_modal();\n\n        }\n\n        window.document.addEventListener('cnx_plugin_insert_script', window.handle_script_select, true);\n\n    }\n\n    close_modal() {\n        \n        window.document.removeEventListener(\"cnx_plugin_insert_script\", window.handle_script_select, true);\n        this.setState({ isModalOpen: false });\n\n        var frameUrl = jQuery(\"#cnx_frame_wrap iframe\").attr(\"src\");\n        var url = new URL(frameUrl);\n        url.searchParams.delete(\"embed\");\n        jQuery(\"#cnx_frame\").attr(\"src\", url.toString() );\n\n    }\n\n\trender() {\n\n\t\tconst { embed_script = \"\", change_state = () => {}, update_embed = () => {} } = this.props;\n\n\t\treturn (\n\t\t\t<div>\n                <Placeholder\n                        icon=\"format-video\"\n                        label={ __( 'Connatix Video Embed', 'connatix-video-embed' ) }\n                        instructions=\"Select the video to embed\"\n                    >\n                        <form>\n\n                            <Button \n                                isPrimary\n                                variant=\"primary\"\n                                onClick={() => this.open_modal() }\n                            >\n                                {__( 'Select Video', 'connatix-video-embed' )}\n                            </Button>  \n\n                            <TextControl \n                                className=\"embed-text-input\"\n                                value={embed_script}\n                                onChange={(new_script) => update_embed(new_script) }\n                            /> \n\n                            { embed_script.length > 0 && false && (\n\n                            <Button \n                                isPrimary\n                                variant=\"primary\"\n                                onClick={() => this.open_modal(true) }\n                            >\n                                {__( 'Edit Video', 'connatix-video-embed' )}\n                            </Button>  \n\n                            )}   \n\n                            { embed_script.length > 0 && (\n\n                                <Button \n                                    isPrimary\n                                    variant=\"primary\"\n                                    onClick={() => change_state('preview') }\n                                >\n                                    {__( 'Preview Video', 'connatix-video-embed' )}\n                                </Button>  \n\n                            )}   \n\n                        </form>\n\n                </Placeholder>\n                { this.state.isModalOpen && (\n                    <EmbedEditModal\n                        embed_script={embed_script}\n                        close_modal={this.close_modal}\n                        update_embed={this.update_embed}\n                    ></EmbedEditModal>\n                    \n                ) }\n\n            </div>\n\t\t);\n\t}\n}","import { BlockControls } from '@wordpress/block-editor';\nimport { Toolbar,  ToolbarButton } from '@wordpress/components';\n\nimport InnerHTML from 'dangerously-set-html-content'\n\n\nexport const PreviewEmbed = props => {\n\tconst { embed_script = \"\", change_state = () => {} } = props;\n\n\tif (embed_script.length < 1) {\n\t\treturn (\n\t\t\t<div> </div> \n\t\t);\n\t}\n\n\treturn (\n        <div>\n            <BlockControls>\n                <Toolbar label=\"Options\">\n                    <ToolbarButton\n                        label=\"Edit Embed\"\n                        icon=\"admin-settings\"\n                        onClick={ () => change_state('edit') }\n                    />\n                    \n                </Toolbar>\n            </BlockControls>\n            &nbsp;\n            <InnerHTML html={embed_script} /> \n        </div>\n\t);\n};","import React, { useEffect, useRef } from 'react';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nfunction DangerouslySetHtmlContent(props) {\n  var html = props.html,\n      rest = objectWithoutProperties(props, ['html']);\n\n  var divRef = useRef(null);\n\n  useEffect(function () {\n    if (!html) return;\n\n    var slotHtml = document.createRange().createContextualFragment(html); // Create a 'tiny' document and parse the html string\n    divRef.current.innerHTML = ''; // Clear the container\n    divRef.current.appendChild(slotHtml); // Append the new content\n  }, [html]);\n\n  return React.createElement('div', _extends({}, rest, { ref: divRef }));\n}\n\nexport default DangerouslySetHtmlContent;\n//# sourceMappingURL=index.es.js.map\n","module.exports = window[\"React\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { __ } from '@wordpress/i18n';\nconst { Component } = wp.element;\n\nimport { registerBlockType } from '@wordpress/blocks';\nimport { BlockControls } from '@wordpress/block-editor';\nimport { TextControl, Button, Placeholder, Toolbar,  ToolbarButton } from '@wordpress/components';\n\nimport InnerHTML from 'dangerously-set-html-content'\n\nimport { PreviewEmbed } from \"../blocks/video-embed/preview-embed\";\nimport { EditEmbed } from \"../blocks/video-embed/edit-embed\";\n\n\nregisterBlockType(  'cnx/video-embed',  {\n    title: 'Connatix: Video Embed', // The title of block in editor.\n\ticon: 'format-video', // The icon of block in editor.\n\tcategory: 'embed', // The category of block in editor.\n\tattributes: {\n\t\tembed_script: {\n            type: 'string',\n            default: ''\n        },\n\n\t},\n    edit: class extends Component {\n\t\tconstructor(props) {\n\t\t\tsuper(...arguments);\n\t\t\tthis.props = props;\n\n            this.state = {\n                view_state: 'preview', // edit or preview\n            };\n\n\t\t\tthis.updateEmbedScript = this.updateEmbedScript.bind(this);\n\t\t\tthis.change_state = this.change_state.bind(this);\n\n\t\t\t// check if we can change the state there based on embed script lengtht\n\t\t\tif(this.props.attributes.embed_script.length < 1){\n\t\t\t\tthis.state.view_state = 'edit';\n\t\t\t}\n\n\t\t}\n\n\t\tchange_state(new_state) {\n\n\t\t\tthis.setState({\n                view_state: new_state,\n            });\n\t\t}\n\n\t\tupdateEmbedScript( embed_script ) {\n\t\t\tthis.props.setAttributes({ embed_script });\n\t\t}\n\n\t\trender() {\n\t\t\tconst { className, attributes: { embed_script = ''} = {} } = this.props;\n\n\t\t\tif(embed_script == \"\" && this.state.view_state == 'preview'){\n\t\t\t\tthis.change_state('edit');\n\t\t\t}\n\n\t\t\tif(this.state.view_state == 'edit') {\n\n\t\t\t\treturn (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<EditEmbed\n\t\t\t\t\t\t\tembed_script={embed_script}\n\t\t\t\t\t\t\tchange_state={this.change_state}\n\t\t\t\t\t\t\tupdate_embed={this.updateEmbedScript}\n\t\t\t\t\t\t></EditEmbed>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\n\t\t\t}\n\t\t\telse if(this.state.view_state == 'preview'){\n\t\t\t\treturn(\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<PreviewEmbed\n\t\t\t\t\t\t\tembed_script={embed_script}\n\t\t\t\t\t\t\tchange_state={this.change_state}\n\t\t\t\t\t\t></PreviewEmbed>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\n\t\t\t\n\t\t}\n\t},\n    save: function(props){\n        const { attributes } = props;\n        return <p dangerouslySetInnerHTML={{__html: attributes.embed_script}} />\n    },\n\n} );\n"],"names":["Button","Modal","useState","EmbedEditModal","props","embed_script","close_modal","update_embed","frameUrl","jQuery","attr","__","Component","wp","element","TextControl","Placeholder","EditEmbed","constructor","arguments","state","isModalOpen","open_modal","bind","edit_mode","url","URL","searchParams","set","encodeURIComponent","toString","setState","self","window","handle_script_select","e","detail","script","document","addEventListener","removeEventListener","delete","render","change_state","new_script","length","BlockControls","Toolbar","ToolbarButton","InnerHTML","PreviewEmbed","registerBlockType","title","icon","category","attributes","type","default","edit","view_state","updateEmbedScript","new_state","setAttributes","className","save","__html"],"sourceRoot":""}